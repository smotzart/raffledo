Array.prototype.append=function(e){return null!=this.push&&this.push(e),this},angular.module("app",["ngRoute","ngResource","ngAnimate","ngSanitize","checklist-model","ui-notification"]).factory("APIReport",["$resource",function(e){return e("games/report/:game_id",{game_id:"@game_id"})}]).factory("APIGames",["$resource",function(e){return e("games/get")}]).factory("APIControl",["$resource",function(e){return e("games/control",{})}]).factory("APIShow",["$resource",function(e){return e("games/show/:id",{id:"@id"})}]).directive("tooltip",function(){return{restrict:"A",link:function(e,t,n){return t.hover(function(){return t.tooltip("show")},function(){return t.tooltip("hide")})}}}).run(["$rootScope","$route"].append(function(e,t){})).config(["NotificationProvider",function(e){return e.setOptions({delay:5e3,startTop:120,startRight:15,verticalSpacing:20,horizontalSpacing:20,positionX:"right",positionY:"top",closeOnClick:!1,templateUrl:"custom_template.html"})}]).controller("AppCtrl",["$scope","APIGames","APIControl","$window","$timeout","Notification","APIReport",function(e,t,n,o,a,i,r){return e.data={},e.modalTags={},e.tags_id=[],e.showTagSuccess=!1,e.enableNotify=!0,e.disableNotify=function(){return new n({actionType:"notify"}).$save({},function(){return e.enableNotify=!1})},(e.getData=function(){return t.get({},function(t){return e.data=t})})(),e.toFavCollection=function(t){return new n({actionId:t.g.id,actionType:"save"}).$save({},function(n){var o,a;if(e.data.all_count=n.all_count,e.enableNotify&&i({title:n.title,message:n.message,scope:e},"notify-theme"),t.save_id=!0,"list"===e.data.view_type)return a=e.data.collections.regular.games.indexOf(t),o=e.data.collections.regular.games.splice(a,1),e.data.collections.favorite.games.push(o[0])},function(t){if(e.enableNotify)return i({title:t.data.title,message:t.data.message,scope:e},"notify-danger")})},e.toHideCollection=function(t,o){return new n({actionId:t.g.id,actionType:"hide"}).$save({},function(n){var a;if(t.hide_id=!0,e.data.all_count=n.all_count,"list"!==e.data.view_type&&"all"!==e.data.view_type||(a=e.data.collections[o].games.indexOf(t),e.data.collections[o].games.splice(a,1)),e.enableNotify)return i({title:n.title,message:n.message,scope:e},"notify-light")},function(t){if(e.enableNotify)return i({title:t.data.title,message:t.data.message,scope:e},"notify-danger")})},e.toViewCollection=function(t){var n,a,r;if(t.is_view=!0,(n=document.createElement("span")).appendChild(document.createTextNode(t.g.suggested_solution)),n.className="sr-only",angular.element(document.body.append(n)),(a=document.createRange()).selectNodeContents(n),(r=o.getSelection()).removeAllRanges(),r.addRange(a),document.execCommand("copy"),n.remove(),e.enableNotify)return i({title:"Hinweis",message:"LÃ¶sungsvorschlag wurde in die Zwischenablage kopiert!",scope:e,delay:"no"},"notify-theme")},e.toggleTagView=function(t,o){return new n({actionType:"toggleTagById",tag_id:t,tag_type:o}).$save({},function(t){if(e.data.all_count=t.all_count,"list"===e.data.view_type&&e.getData(),(e.data.view_type===o&&"company"===o||e.data.view_type===o&&"tag"===o)&&(e.data.collections.regular.entry.is_hide=!e.data.collections.regular.entry.is_hide,e.data.collections.regular.entry.is_hide||(e.showTagSuccess=!0,a(function(){return e.showTagSuccess=!1},3e3))),e.enableNotify)return i({title:t.title,message:t.message,scope:e},"notify-success")})},e.openModal=function(t){return e.modalTags=t.tags},e.reportGame=function(t){return e.reportGameId=t.g.id},e.sendReport=function(){return new r({text:e.reportText}).$save({game_id:e.reportGameId},function(t){if(e.enableNotify)return i({title:t.title,message:t.message,scope:e},"notify-success")},function(t){if(e.enableNotify)return i({title:t.data.title,message:t.data.message,scope:e},"notify-danger")})},e.sendModal=function(){return new n({actionType:"hideTags",tags_id:e.tags_id}).$save({},function(){return e.enableNotify&&i({title:"Hinweis",message:"Return to list",scope:e},"notify-success"),e.getData()})}}]);