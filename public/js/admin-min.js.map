{"version":3,"sources":["admin.coffee"],"names":["$","tagsname","tooltip","on","event","button","modal","tagId","tagName","relatedTarget","data","this","find","text","val","attr","placeholder","is","tagsinput","tagClass","cancelConfirmKeysOnEmpty","removeClass","removeAttr","addClass","change","input","get","search","i","item","len","length","id","Bloodhound","datumTokenizer","tokenizers","obj","whitespace","queryTokenizer","prefetch","url","cache","filter","tags","map","tag","name","initialize","trimValue","typeaheadjs","displayKey","valueKey","source","ttAdapter"],"mappings":"AAAAA,EAAE,WACA,IAAIC,EAmFJ,OAlFAD,EAAE,2BAA2BE,UAC7BF,EAAE,cAAcG,GAAG,gBAAiB,SAASC,GAC3C,IAAIC,EAAQC,EAAOC,EAAOC,EAM1B,OAJAD,GADAF,EAASL,EAAEI,EAAMK,gBACFC,KAAK,SACpBF,EAAUH,EAAOK,KAAK,YACtBJ,EAAQN,EAAEW,OACJC,KAAK,mBAAmBC,KAAKL,GAC5BF,EAAMM,KAAK,UAAUE,IAAIP,KAElCP,EAAE,eAAeG,GAAG,SAAU,SAASC,GACrC,OAAOJ,EAAE,UAAUe,KAAK,CACtBC,YAAehB,EAAEW,MAAMM,GAAG,YAAc,cAAgB,YAG5DjB,EAAE,oBAAoBkB,UAAU,CAC9BC,SAAU,mBACVC,0BAA0B,IAE5BpB,EAAE,iBAAiBG,GAAG,SAAU,WAC9B,MAAsB,QAAlBH,EAAEW,MAAMG,MACHd,EAAE,aAAaqB,YAAY,UAAUT,KAAK,SAASU,WAAW,YAE9DtB,EAAE,aAAauB,SAAS,UAAUX,KAAK,SAASG,KAAK,WAAY,cAG5Ef,EAAE,iBAAiBwB,SACnBxB,EAAE,6BAA6BG,GAAG,SAAU,SAASC,GACnD,IAAIqB,EAEJ,OADAA,EAAQzB,EAAEW,MACHX,EAAE0B,IAAI,0BAA2B,CACtCC,OAAUF,EAAMX,OACf,SAASJ,GACV,IAAIkB,EAAGC,EAAMC,EACb,GAAoB,IAAhBpB,EAAKqB,OACP,IAAKH,EAAI,EAAGE,EAAMpB,EAAKqB,OAAQH,EAAIE,EAAKF,IACtCC,EAAOnB,EAAKkB,GACZ5B,EAAE,iBAAiBc,IAAIe,EAAKG,IAAIR,SAGpC,OAAOxB,EAAE0B,IAAI,sBAAuB,CAClCC,OAAUF,EAAMX,OACf,SAASJ,GACV,OAAIA,EAAKqB,OAAS,EACTN,EAAMF,SAAS,0BAEfE,EAAMJ,YAAY,2BAE1B,SAgBF,WAELpB,EAAW,IAAIgC,WAAW,CACxBC,eAAgBD,WAAWE,WAAWC,IAAIC,WAAW,QACrDC,eAAgBL,WAAWE,WAAWE,WACtCE,SAAU,CACRC,IAAK,kBACLC,OAAO,EACPC,OAAQ,SAASC,GACf,OAAO3C,EAAE4C,IAAID,EAAM,SAASE,GAC1B,MAAO,CACLC,KAAMD,EAAIC,aAMXC,aACF/C,EAAE,eAAekB,UAAU,CAChCC,SAAU,mBACVC,0BAA0B,EAC1B4B,WAAW,EACXC,YAAa,CACXH,KAAM,WACNI,WAAY,OACZC,SAAU,OACVC,OAAQnD,EAASoD","sourcesContent":["$ ->\r\n  $('[data-toggle=\"tooltip\"]').tooltip()\r\n\r\n  $('#removeTag').on 'show.bs.modal', (event) ->\r\n    button  = $(event.relatedTarget) \r\n    tagId   = button.data('tagid')\r\n    tagName = button.data('tagname')\r\n    \r\n    modal = $(this)\r\n    modal.find('#modal-tag-name').text(tagName)\r\n    modal.find('#tagId').val(tagId)\r\n  \r\n  $('#price_info').on 'change', (event) ->\r\n    $('#price').attr('placeholder': if $(this).is(':checked') then 'Information' else 'Preis')\r\n\r\n  $(\"[data-tag='yes']\").tagsinput\r\n    tagClass: 'badge badge-info'\r\n    cancelConfirmKeysOnEmpty: false\r\n\r\n  $('#companies_id').on 'change', () ->\r\n    if ($(this).val() == 'new')\r\n      $('#new_game').removeClass('d-none').find('input').removeAttr('disabled')\r\n    else\r\n      $('#new_game').addClass('d-none').find('input').attr('disabled', 'disabled')\r\n  $('#companies_id').change()\r\n  \r\n  $('#url_change .form-control').on 'change', (event) ->\r\n    input = $(this)\r\n    $.get \"/admin/companies/search\", {'search': input.val()}, (data) ->\r\n      if data.length == 1\r\n        for item in data\r\n          $('#companies_id').val(item.id).change()\r\n      $.get \"/admin/games/search\", {'search': input.val()}, (data) ->\r\n        if data.length > 0\r\n          input.addClass('is-invalid text-danger')\r\n        else\r\n          input.removeClass('is-invalid text-danger')\r\n      , 'json'\r\n      ###\r\n      if data.length > 0\r\n        insert_data = $('<div class=\"list-group list-group-flush\"></div>')\r\n        for item in data\r\n          insert_item = $('<a href=\"#\" data-company=\"' + item.id + '\" class=\"list-group-item list-group-item-action\">' + item.name + '</a>')\r\n          insert_item.on 'click', (e) ->\r\n            e.preventDefault()\r\n            company_id = $(this).data('company')\r\n            $('#companies_id').val(company_id).change()\r\n            $('#existUrl').modal('hide')\r\n          insert_data.append(insert_item)\r\n          \r\n        $('#existUrl .modal-body').html(insert_data)\r\n        $('#existUrl').modal('show')\r\n      ###\r\n    , 'json'\r\n\r\n  \r\n    \r\n\r\n  \r\n  tagsname = new Bloodhound\r\n    datumTokenizer: Bloodhound.tokenizers.obj.whitespace('name')\r\n    queryTokenizer: Bloodhound.tokenizers.whitespace\r\n    prefetch: \r\n      url: '/admin/tags/get'\r\n      cache: false\r\n      filter: (tags) ->\r\n        $.map tags, (tag) ->\r\n          name: tag.name\r\n\r\n  tagsname.initialize()\r\n\r\n  $('#tags_input').tagsinput\r\n    tagClass: 'badge badge-info'\r\n    cancelConfirmKeysOnEmpty: false\r\n    trimValue: true\r\n    typeaheadjs:\r\n      name: 'tagsname'\r\n      displayKey: 'name'\r\n      valueKey: 'name'\r\n      source: tagsname.ttAdapter()"],"file":"admin-min.js"}